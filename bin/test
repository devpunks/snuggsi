#!/usr/bin/env bash

export NODE_PATH=`pwd`
declare -rx PORT=${PORT:-1234}

BIN="$NODE_PATH/node_modules/.bin"
SPECS="$BIN/tap-spec"
TEST="$BIN/tape --require $NODE_PATH"

API="element"
ENTRY="index.test"
declare LIBRARIES=${LIBRARIES:-.,test,html-element} # resource,middleware,server

TESTS=$NODE_PATH/${1:-"{$LIBRARIES,$API}"}/$ENTRY


echo
echo "ðŸš¨  Testing, Testing, 1,2,3, ..."
echo
echo "  Entry ðŸ‘‰  $ENTRY"
echo "  Suite ðŸ‘‰  $TESTS"
echo


$TEST         \
  --require . \
$TESTS | $SPECS
