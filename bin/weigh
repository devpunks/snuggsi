#!/bin/bash

MAXIMUM=1500
DIRECTORY=./dist
LIBRARY=${1:-$DIRECTORY/snuggsi.min.es.br}


ls -al $DIRECTORY


echo
echo "ğŸš snuggsiãƒ„ Weight Check"
echo "  âš ï¸  Maximum allowable weight ğŸ‘‰  $MAXIMUM OCTETS"


OCTETS=$(
  ls -nl $LIBRARY | \
  awk '{print $5}'
) || exit 1


echo "  ğŸ‘‡"
echo "  ğŸ“ƒ  $LIBRARY"

if [[ $OCTETS -gt $MAXIMUM ]]; then
  echo "    ğŸ”´  Weight ğŸ‘‰  $OCTETS OCTETS"
  echo "      âŒ  Overweight by $((OCTETS - MAXIMUM)) OCTETS"
  echo && exit 1 # â­• ğŸš« âŒ ğŸ”´ ğŸ“
fi


echo "    âœ…  Weight ğŸ‘‰  $OCTETS OCTETS"
echo
