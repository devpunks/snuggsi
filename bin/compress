#!/usr/bin/env bash

# bro is installed locally and manually. No npm cli. HELP!


DIST=./dist
BROTLI="bro"
ZOPFLI="./node_modules/.bin/zopfli"


echo
echo "ðŸ’ª  Compressing Libraries"
echo "  ðŸ‘‡"


FILE="$DIST/snuggsi.min.es"

echo "  ðŸ’¾  $FILE"
echo "    ðŸ“ƒ  Brotli ðŸ‘‰  $FILE.br"

$BROTLI         \
  --repeat 1    \
  --quality 11  \
  --input $FILE \
> "$FILE.br"


echo "    ðŸ“ƒ  GZIP   ðŸ‘‰  $FILE.gz"

$ZOPFLI     \
  -i 50     \
  --gzip    \
  --ext gz  \
  --verbose \
$FILE


echo "    ðŸ“ƒ  ZOPFLI   ðŸ‘‰  $FILE.zo"

$ZOPFLI     \
  -i 50     \
  --gzip    \
  --ext zo  \
  --verbose \
$FILE


FILE="$DIST/snuggsi.min.js"

echo "  ðŸ‘‡"
echo "  ðŸ’¾  $FILE"
echo "    ðŸ“ƒ  Brotli ðŸ‘‰  $FILE.br"

$BROTLI         \
  --repeat 1    \
  --quality 11  \
  --input $FILE \
> "$FILE.br"


echo "    ðŸ“ƒ  GZIP   ðŸ‘‰  $FILE.gz"

$ZOPFLI     \
  -i 50     \
  --gzip    \
  --ext gz  \
  --verbose \
$FILE


echo "    ðŸ“ƒ  ZOPFLI   ðŸ‘‰  $FILE.zo"

$ZOPFLI     \
  -i 50     \
  --gzip    \
  --ext zo  \
  --verbose \
$FILE
