#!/bin/bash

echo # NYC Test coverage
echo "Coverage: тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П "
export THRESHOLD=95       # Represented in Percentage
export INCLUDE="resource" # Included coverage files
export EXCLUDE="**/node_modules/**" # Excluded coverage files

echo "Threshold ЁЯСЙ  $THRESHOLD"
echo "Including ЁЯСЙ  $INCLUDE"
echo "Excluding ЁЯСЙ  $EXCLUDE"
echo


  ./node_modules/.bin/nyc \
    --include=$INCLUDE    \
    --exclude=$EXCLUDE    \
    --extension=.es       \
    --reporter=text       \
    bin/test
echo "тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П тЪая╕П "

./node_modules/.bin/nyc         \
  check-coverage                \
    --lines        $THRESHOLD   \
    --function     $THRESHOLD   \
    --statements   $THRESHOLD   \
  bin/test

# echo $?
