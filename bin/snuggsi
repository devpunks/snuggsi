#!/usr/bin/env bash

# Bash string manipulations - http://www.tldp.org/LDP/LG/issue18/bash.html

echo
echo "  „ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ "
echo "  „ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ                  „ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ "
echo "  „ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ     snuggsi „ÉÑ   „ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ "
echo "  „ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ                  „ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ "
echo "  „ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ„ÉÑ "


declare -r  ENTRY=`dirname $(readlink $BASH_SOURCE)`
declare -r  BIN=$(cd `dirname $BASH_SOURCE`/$ENTRY; pwd)
declare -rx SNUGGSI=$(dirname $BIN)
declare -r  COMMAND="$SNUGGSI/bin/$1"
declare -rx RESOURCES=("${@:2}")


function execute {
  local executable=$(basename $COMMAND)

  echo

  if test ! -f $COMMAND || test $executable == snuggsi
    then
      echo "üî¥  Invalid command"
      echo
      exit 1
    fi

  echo "üìö  MOUNTING RESOURCES ‚Ä¶"
  printf ' üëâ  üìÅ  %s\n' "${RESOURCES[@]}"
  echo


  for RESOURCE in ${RESOURCES[@]}
    do
      if test -d $RESOURCE
        then
          printf ' üëâ  üìó  %s\n' "${RESOURCES[@]}"
          $COMMAND $RESOURCE
        else
          echo "üî¥  $RESOURCE NOT A DIRECTORY"
      fi
    done

  echo
}


execute $COMMAND
