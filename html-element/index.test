const
  { test, serve }
    = require ('test')

const
  puppeteer
    = require ('puppeteer')


test ('new HTMLElement', async t => {

  const
    server
      = serve ``
  , browser
      = await puppeteer.launch ()
  , page
      = await browser.newPage ()
  , log
      = message =>
        console.log ( 'Console Log', message.args ()[1] )


  await page.goto
    (`http://localhost:${process.env.PORT}`)

console.warn (await page.content ())

//page.on ('console', log)

//page.evaluate
//  (() => console.log('hello', 5, {foo: 'bar'}))


  await page
    .screenshot ({ path: 'screenshot.png' })

  await browser.close ()

  server.close ``
  t.end ()
})

