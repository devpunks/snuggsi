const
  { test, serve }
    = require ('test')

const
  puppeteer
    = require ('puppeteer')


test ('new HTMLElement', async t => {

  const
    server
      = serve ``
  , browser
      = await puppeteer.launch ()
  , page
      = await browser.newPage ()


  await page
    .goto ('https://example.com')

//await page.content ()

//console.warn (page)
  page.on ('console', msg => {
    for (let i = 0; i < msg.args().length; ++i)
      console.log(`${i}: ${msg.args()[i]}`)
  })

  page.evaluate(() => console.log('hello', 5, {foo: 'bar'}))


  await page
    .screenshot ({ path: 'screenshot.png' })

  await browser.close ()

  server.close ``
  t.end ()
})

