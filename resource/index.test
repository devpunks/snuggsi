const
  path = '/foo/'
, URL  = `http://localhost:8181${path}`

, { test, read, fetch }
    = require ('test')

, { Server, Resource }
    = require ('..')

, route
    = require ('../middleware')
      .route  ( `${path}{id}`, Resource `server/fixtures` )


test ('new Resource', async t => {

  const
    method = 'GET'

  , endpoint =
      [ `${URL}14`, { method } ]

    server =
      (new Server ( [ route ] ))
      .serve ``

  , response =
      await fetch ( ... endpoint )

  , { status, body } = response


  console.warn ('The Body', response.headers, status, await read (await body))

  server.close ``
  t.end ()
})
