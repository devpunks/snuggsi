const
  path = '/foo'
, URL  = `http://localhost:8181${path}`

, { test, read, fetch }
    = require ('test')

, { Server, Resource }
    = require ('..')

, route
    = require ('../middleware')
      .route  ( path, Resource `server/fixtures` )


test.only ('new Resource', async t => {

  const
    method = 'POST'

  , endpoint =
      [ URL, { method } ]

    server =
      (new Server ( [ route ] ))
      .serve ``

  , endpoint =
      [`http://localhost:8181${path}`, { method: 'POST'}]

  , { body } =
      await fetch ( ... endpoint )


  console.warn ('The Body', await read (body))

  server.close ``
  t.end ()
})
