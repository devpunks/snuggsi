const
  path = '/foo/'
, URL  = `http://localhost:8181${path}`

, { test, read, fetch }
    = require ('test')

, { Server, Resource }
    = require ('..')

, route
    = require ('../middleware')
      .route  ( `${path}{id}`, Resource `server/fixtures` )


test.only ('new Resource', async t => {

  const
    method = 'PATCH'

  , endpoint =
      [ `${URL}14`, { method } ]

    server =
      (new Server ( [ route ] ))
      .serve ``

  , response =
      await fetch ( ... endpoint )

  , { body } = response


  console.warn ('The Body', await read (body))

  server.close ``
  t.end ()
})
