<meta charset=UTF-8>
<meta name=viewport content=width=device-width,initial-scale=1>

<title>&lt;to-do&gt;</title>

<link rel=stylesheet href=https://devpunks.herokuapp.com/typography.css>

<script src=/snuggsi.es></script>
<script name=polyfill src=https://cdnjs.cloudflare.com/ajax/libs/webcomponentsjs/1.0.0/webcomponents-hi-ce.js></script>

<!-- import works inline body -->
<link rel=import href=/examples/header-group>

<header-group>
  <h2 slot=header>&lt;to-do&gt;</h2>
  <a  slot=subheader title='See more component examples' href=/examples>See more component examples</a>
</header-group>

<to-do>
  <h1>{name}'s &lt;to-do&gt; List</h1>

  <form action=#>
    <input placeholder='Remember the milk&hellip;'>
    <button>Add</button>
  </form>

  <ol>
  <template name=tasks>
    <!-- {#} - current index   -->
    <!-- {self} - current item -->
    <li> {self}
      <button onclick=remove id={#}>Remove</button>
  </template>
  </ol>

  <footer>Number of tasks: {count}</footer>
</to-do>

<script defer>

Element `to-do`

(class extends HTMLElement {

  initialize () {
    this.context
      .tasks = ['Wash clothes', 'Eat food']
  }

  onidle () { // hide count if no tasks
    this.select `footer`.hidden =
      !!! this.context.tasks.length
  }

  // "automagically" delegates registration on `to-do`
  // based solely on GlobalEventHandlers.on* naming conventions.
  // Further Details: https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers
  onsubmit (event) {
    event.preventDefault ()

    const input = this.select `input`

    this.context
      .tasks.push (input.value)

    input.value = ''
  }

  remove (event) {
    this.context.tasks
      // MDN Array.prototype.slice ()
      // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice
      .splice (event.target.id, 1)
  }

  get tasks ()
    { return this.context.tasks }

  get name ()
    { return 'Loren Hale' }

  get count ()
    { return this.context.tasks.length }

})

</script>

<script src=/browser-sync.es></script>

