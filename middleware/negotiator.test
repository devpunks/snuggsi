const
  { test, serve, read, fetch }
    = require ('test')


test ('Resource HTML GET / Accept: text/html', async t => {

  const
    accept   = 'text/html'
  , URI      = `http://localhost:8181/`
  , server   = serve `server/fixtures`
  , expected = read  `resource/fixtures/index.html`
  , options  = {
      compress : false
    , headers  : { accept } }
  , response = await fetch (URI, options)
  , { status, headers } = response
  , type = headers.get ('content-type')
  , length   = headers.get ('Content-Length')
  , modified = headers.get ('Last-Modified')

console.log ('type', headers.get ('content-type'))
console.log ('status', status)
//t.ok (type.match (/application\/javascript/))
//t.ok (type.match (/charset=utf-8/))
//t.equal ( expected, await response.text `` )
//t.ok (length == expected.length)
//t.equal ( status, 200 )
//t.ok (modified)


  server.close ``
  t.end ()
})
